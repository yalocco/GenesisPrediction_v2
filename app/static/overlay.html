<!-- app/static/overlay.html -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GenesisPrediction v2 - Overlay</title>
  <link rel="stylesheet" href="/static/app.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">GenesisPrediction v2</div>
        <nav class="nav">
          <a class="nav-link" href="/static/index.html">Home</a>
          <a class="nav-link is-active" href="/static/overlay.html">Overlay</a>
          <a class="nav-link" href="/static/sentiment.html">Sentiment</a>
        </nav>
        <div class="badge">
          <span class="dot"></span>
          <span>GUI is read-only (SST)</span>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="card">
        <h2 style="margin:0 0 6px; font-size:22px;">Overlays</h2>
        <div style="font-size:13px; color:#9ca3af;">
          dated / latest を読むだけ。GUIは再計算しません。
        </div>
      </section>

      <section class="card">
        <h3 style="margin:0 0 12px; font-size:18px;">FX Major Pairs</h3>

        <div class="img-wrap">
          <div style="margin:0 0 6px; color:#9ca3af; font-size:12px;">USDJPY</div>
          <img id="img_usdjpy" alt="USDJPY overlay" />
        </div>

        <div class="img-wrap">
          <div style="margin:0 0 6px; color:#9ca3af; font-size:12px;">EURJPY</div>
          <img id="img_eurjpy" alt="EURJPY overlay" />
        </div>

        <div class="img-wrap">
          <div style="margin:0 0 6px; color:#9ca3af; font-size:12px;">EURUSD</div>
          <img id="img_eurusd" alt="EURUSD overlay" />
        </div>

        <div style="margin-top:10px; color:#9ca3af; font-size:12px;">
          source: /analysis/fx_*_(dated|latest).png
        </div>
      </section>
    </main>
  </div>

  <script>
    (function () {
      const qs = new URLSearchParams(location.search);
      const date = qs.get("date"); // YYYY-MM-DD or null

      function srcFor(pair) {
        if (date) return `/analysis/fx_${pair}_${date}.png`;
        return `/analysis/fx_${pair}_latest.png`;
      }

      const map = {
        usdjpy: document.getElementById("img_usdjpy"),
        eurjpy: document.getElementById("img_eurjpy"),
        eurusd: document.getElementById("img_eurusd"),
      };

      for (const k of Object.keys(map)) {
        map[k].src = srcFor(k);
      }
    })();
  </script>
</body>
</html>
